function resizeEditor(){var a=window.innerHeight;$("#editor").css("height",(a-50).toString()+"px")}var editor=ace.edit("editor");window.Editor=editor,angular.module("app",["ui.ace"]).controller("EditorCtrl",["$scope","$http",function(a,b){a.themes=ace.require("ace/ext/themelist").themesByName,a.theme="",a.tabSizes=[2,4,6,8],a.fontSizes=[8,10,12,14,16,18],a.fontSize=12,a.tabSize=a.tabSizes[0],a.wrapMode=!0,a.init=function(){a.code=Global.file.content,resizeEditor()},a.aceOption={require:["ace/ext/language_tools"],mode:Global.file.format,theme:"textmate",advanced:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0},onLoad:function(c){c.setReadOnly(Global.editor.readonly),c.$blockScrolling=1/0,c.getSession().setUseSoftTabs(!0),c.getSession().setTabSize(a.tabSize),c.getSession().setUseWrapMode(a.wrapMode),a.themeChanged=function(b){c.setTheme("ace/theme/"+b.name),a.theme=b},a.fontSizeChanged=function(b){document.getElementById("editor").style.fontSize=b+"px",a.fontSize=b},a.tabSizeChanged=function(b){c.getSession().setTabSize(b),a.tabSize=b},a.wrapChanged=function(){a.wrapMode=a.wrapMode?!1:!0,c.getSession().setUseWrapMode(a.wrapMode)},a.save=function(){b.post("/save",{datas:editor.getValue()})},a["export"]=function(a){$(a.target).attr("href","data:text/plain;charset=utf-8,"+encodeURIComponent(editor.getValue()))}}}}]),$(document).ready(function(){$(window).on("resize",function(){resizeEditor()})});var socket=io.connect();$(document).ready(function(){socket.on("docChange",function(a){var b=a.editor.cursor;editor.setValue(a.file.content),editor.getSession().getSelection().selectionLead.setPosition(b.row,b.column),Global=a}),$("#editor").keyup(function(){var a=editor.getValue(),b=editor.selection.getCursor();socket.emit("docOnChange",{content:a,cursor:b})})});