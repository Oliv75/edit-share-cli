function resizeEditor(){var a=window.innerHeight;$("#editor").css("height",(a-50).toString()+"px")}var editor=ace.edit("editor");window.Editor=editor,angular.module("app",["ui.ace"]).controller("EditorCtrl",["$scope","$http",function(a,b){a.themes=["Monokai","Ambiance","Chaos","Chrome","Clouds","Clouds_midnight","Cobalt","Crimson_editor","Dawn","Dreamweaver","Eclipse","Github","Idle_fingers","Katzenmilch","Kr_theme","Kuroir","Merbivore","Merbivore_soft","Mono_industrial","Pastel_on_dark","Solarized_dark","Solarized_light","Terminal","Textmate","Tomorrow","Tomorrow_night","Tomorrow_night_blue","Tomorrow_night_bright","Tomorrow_night_eighties","Twilight","Vibrant_ink","Xcode"],a.tabs=[2,4,6,8],a.theme=a.themes[0],a.fontSize=12,a.tabSize=a.tabs[0],a.wrapMode=!0,a.init=function(){a.code=Global.file.content,resizeEditor()},a.aceOption={require:["ace/ext/language_tools"],mode:Global.file.format,theme:a.theme.toLowerCase(),advanced:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0},onLoad:function(c){c.setReadOnly(Global.editor.readonly),c.$blockScrolling=1/0,c.getSession().setUseSoftTabs(!0),c.getSession().setTabSize(a.tabSize),c.getSession().setUseWrapMode(a.wrapMode),a.themeChanged=function(){c.setTheme("ace/theme/"+a.theme.toLowerCase())},a.fontSizeChanged=function(){document.getElementById("editor").style.fontSize=a.fontSize+"px"},a.tabSizeChanged=function(){c.getSession().setTabSize(a.tabSize)},a.wrapChanged=function(){c.getSession().setUseWrapMode(a.wrapMode)},a.save=function(){b.post("/save",{datas:editor.getValue()})},a["export"]=function(a){$(a.target).attr("href","data:text/plain;charset=utf-8,"+encodeURIComponent(editor.getValue()))}}}}]),$(document).ready(function(){$(window).on("resize",function(){resizeEditor()})});var socket=io.connect();$(document).ready(function(){socket.on("docChange",function(a){var b=a.editor.cursor;editor.setValue(a.file.content),editor.getSession().getSelection().selectionLead.setPosition(b.row,b.column),Global=a}),$("#editor").keyup(function(){var a=editor.getValue(),b=editor.selection.getCursor();socket.emit("docOnChange",{content:a,cursor:b})})});